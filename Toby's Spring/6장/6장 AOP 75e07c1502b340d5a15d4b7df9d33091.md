# 6장 AOP

# 6.1 트랜잭션 코드의 분리

## 6.1.1 메소드 분리

DI를 이용한 클래스의 분리

DI 적용을 이용한 트랜잭션 분리

UserService 인터페이스 도입

분리된 트랜잭션 기능

트랜잭션 적용을 위한 DI 설정

트랜잭션 분리에 따른 테스트 수정

트랜잭션 경계설정 코드 분리의 장점

고립된 단위 테스트

복잡한 의존관계 속의 테스트

테스트 대상 오브젝트 고립시키기

테스트를 위한 UserServiceImpl 고립

고립된 단위 테스트 활용

UserDao 목 오브젝트

테스트 수행 성능의 향ㅅ아

단위 테스트와 통합 테스트

목 프레임워크

Mockito 프레임워크

다이내믹 프록시와 팩토리 빈

프록시와 프록시 패턴, 데코레이터 패턴

데코레이터 패턴

프록시 패턴

다이내믹 프록시

프록시의 구성과 프록시 작성의 문제점

리플렉션

프록시 클래스

다이내믹 프록시 적용

다이내믹 프록시의 확장

다이내믹 프록시를 이용한 트랜잭션 부가기능

트랜잭션 InvocationHandler

TransactionHandler와 다이내믹 프록시를 이용하는 테스트

다이내믹 프록시를 위한 팩토리 빈

팩토리 빈

팩토리 빈의 설정 방법

다이내믹 프록시를 만들어주는 팩토리 빈

트랜잭션 프록시 팩토리 빈

트랜잭션 프록시 팩토리 빈 테스트

프록시 팩토리 빈 방식의 장점과 한계

프록시 팩토리 빈의 재사용

프록시 팩토리 빈 방식의 장점

프록시 팩토리 빈의 한계

스프링의 프록시 팩토리 빈

ProxyFactoryBean

어드바이스: 타깃이 필요 없는 순수한 부가기능

포인트컷: 부가기능 적용 대상 메소드 선정 방법

ProxyFactoryBean 적용

TransactionAdvice

스프링 XML 설정파일

테스트

어드바이스와 포인트컷의 재사용

정리